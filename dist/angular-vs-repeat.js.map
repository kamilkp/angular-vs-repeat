{"version":3,"sources":["angular-vs-repeat.js"],"names":["window","angular","closestElement","element","prototype","closest","matchingFunction","reduce","res","prop","document","documentElement","selector","el","parentNode","getWindowScroll","scrollTop","pageYOffset","scrollLeft","pageXOffset","body","getClientSize","sizeProp","innerWidth","innerHeight","getScrollPos","scrollProp","getScrollOffset","vsElement","scrollElement","isHorizontal","vsPos","getBoundingClientRect","scrollPos","scrollValue","analyzeNgRepeatUsage","options","opt","attr","indexOf","Error","printDeprecationWarning","$element","message","console","warn","attrDeprecated","attrname","defaultOptions","latch","container","scrollParent","size","offsetBefore","offsetAfter","scrolledToBeginning","noop","scrolledToEnd","scrolledToBeginningOffset","scrolledToEndOffset","scrollMargin","horizontal","autoresize","hunked","hunkSize","vsRepeatModule","module","directive","$compile","$parse","restrict","scope","compile","compileElement","compileAttrs","compileRepeatContainer","querySelector","vsRepeatContainer","repeatContainerChildren","children","ngRepeatChild","eq","childCloneHtml","outerHTML","collectionName","forEach","originalNgRepeatAttr","ngRepeatExpression","isNgRepeatStart","expressionMatches","exec","lhs","rhs","rhsSuffix","index","repeaterElement","empty","pre","$scope","$attrs","_parseSize","getSize","parsed","String","item","vsRepeat","$eval","repeatContainer","isDefined","childClone","childTagName","tagName","toLowerCase","originalCollection","originalLength","$beforeContent","$afterContent","autosizingRequired","$scrollParent","call","clientSize","offsetSize","scrollSize","totalSize","length","sizesCumulative","debug","$debugParent","$debug","css","append","$on","remove","measuredSize","vsRepeatOptions","$watchCollection","newOpts","mergedOptions","JSON","stringify","Object","assign","reinitialize","coll","refresh","_mapSize","getFromMeasured","hardSize","sizes","map","sum","$$postDigest","offsetHeight","offsetWidth","i","gotSomething","insideStartEndSequence","attributes","$root","$$phase","$digest","dereg","$watch","getLayoutProps","value","layoutProp","acc","addClass","startIndex","endIndex","scrollHandler","pos","updateInnerCollection","_ensureScrollIntegrity","on","onWindowResize","off","_prevStartIndex","_prevEndIndex","_minStartIndex","_maxEndIndex","$emit","setTimeout","__endIndex","Math","max","slice","updateTotalSize","_prevClientSize","reinitOnClientHeightChange","ch","requestAnimationFrame","binaryFind","array","threshold","a","b","d","m","floor","$scrollPosition","$clientSize","scrollOffset","__startIndex","_warnMismatch","relativeScroll","min","digestRequired","abs","triggerIndex","o1","o2","total","expectedSize","compStyle","getComputedStyle","paddings","containerSize","Number","head","exports","name"],"mappings":"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","file":"angular-vs-repeat.js","sourcesContent":["/**\n * Copyright Kamil Pękala http://github.com/kamilkp\n * Angular Virtual Scroll Repeat v2.0.9 2018/04/02\n */\n\n/* global console, setTimeout, module */\n\n((window, angular) => {\n  /**\n   * DESCRIPTION:\n   * vsRepeat directive stands for Virtual Scroll Repeat. It turns a standard ngRepeated set of elements in a scrollable container\n   * into a component, where the user thinks he has all the elements rendered and all he needs to do is scroll (without any kind of\n   * pagination - which most users loath) and at the same time the browser isn't overloaded by that many elements/angular bindings etc.\n   * The directive renders only so many elements that can fit into current container's clientHeight/clientWidth.\n\n   * LIMITATIONS:\n   * - current version only supports an Array as a right-hand-side object for ngRepeat\n   * - all rendered elements must have the same height/width or the sizes of the elements must be known up front\n\n   * USAGE:\n   * In order to use the vsRepeat directive you need to place a vs-repeat attribute on a direct parent of an element with ng-repeat\n   * example:\n   * <div vs-repeat=\"options\">\n   *      <div ng-repeat=\"item in someArray\">\n   *          <!-- content -->\n   *      </div>\n   * </div>\n\n   * or:\n   * <div vs-repeat=\"options\">\n   *      <div ng-repeat-start=\"item in someArray\">\n   *          <!-- content -->\n   *      </div>\n   *      <div>\n   *         <!-- something in the middle -->\n   *      </div>\n   *      <div ng-repeat-end>\n   *          <!-- content -->\n   *      </div>\n   * </div>\n\n   * You can also measure the single element's height/width (including all paddings and margins), and then speficy it as a value\n   * of the option's `size` property. This can be used if one wants to override the automatically computed element size.\n   * example:\n   * <div vs-repeat=\"{size: 50}\"> <!-- the specified element height is 50px -->\n   *      <div ng-repeat=\"item in someArray\">\n   *          <!-- content -->\n   *      </div>\n   * </div>\n\n   * IMPORTANT!\n\n   * - the vsRepeat directive must be applied to a direct parent of an element with ngRepeat\n   * - the value of vsRepeat attribute is the single element's height/width measured in pixels. If none provided, the directive\n   *      will compute it automatically\n\n   * OPTIONAL PARAMETERS (attributes):\n   * vs-repeat-container=\"selector\" - selector for element containing ng-repeat. (defaults to the current element)\n\n   * OPTIONS:\n   * Options shall be passed as an object to the `vs-repeat` attribute e.g.: `<div vs-repeat=\"{scrollParent: 'window', size: 20}\"></div>`\n   *\n   * Available options:\n   * `horizontal` - stack repeated elements horizontally instead of vertically\n   * `offset-before` - top/left offset in pixels (defaults to 0)\n   * `offset-after` - bottom/right offset in pixels (defaults to 0)\n   * `scroll-margin` - how many pixels ahead should elements be rendered while scrolling\n   * `latch` - if true, elements will be rendered gradually but won't be removed when scrolled away (defaults to false)\n\n   * `size` - a property name of the items in collection that is a number denoting the element size (in pixels)\n   * `autoresize` - use this attribute without vs-size and without specifying element's size. The automatically computed element style will\n   *              readjust upon window resize if the size is dependable on the viewport size\n   * `scrolled-to-end` - callback will be called when the last item of the list is rendered\n   * `scrolled-to-end-offset` - set this number to trigger the scrolledToEnd callback n items before the last gets rendered\n   * `scrolled-to-beginning` - callback will be called when the first item of the list is rendered\n   * `scrolled-to-beginning-offset` - set this number to trigger the scrolledToBeginning callback n items before the first gets rendered\n\n   * EVENTS:\n   * - `vsRepeatTrigger` - an event the directive listens for to manually trigger reinitialization\n   * - `vsRepeatReinitialized` - an event the directive emits upon reinitialization done\n   */\n\n  let closestElement = angular.element.prototype.closest;\n\n  if (!closestElement) {\n    const matchingFunction = [\n      'matches',\n      'matchesSelector',\n      'webkitMatches',\n      'webkitMatchesSelector',\n      'msMatches',\n      'msMatchesSelector',\n      'mozMatches',\n      'mozMatchesSelector',\n    ].reduce((res, prop) => res ?? (prop in document.documentElement ? prop : null), null);\n\n    closestElement = function(selector) {\n      let el = this[0].parentNode;\n      while (el !== document.documentElement && el != null && !el[matchingFunction](selector)) {\n        el = el.parentNode;\n      }\n\n      if (el?.[matchingFunction](selector)) {\n        return angular.element(el);\n      }\n\n      return angular.element();\n    };\n  }\n\n  function getWindowScroll() {\n    if ('pageYOffset' in window) {\n      return {\n        scrollTop: window.pageYOffset,\n        scrollLeft: window.pageXOffset,\n      };\n    }\n\n    return {\n      scrollTop: document.documentElement.scrollTop ?? document.body.scrollTop ?? 0,\n      scrollLeft: document.documentElement.scrollLeft ?? document.body.scrollLeft ?? 0,\n    };\n  }\n\n  function getClientSize(element, sizeProp) {\n    if (element === window) {\n      return sizeProp === 'clientWidth' ? window.innerWidth : window.innerHeight;\n    }\n\n    return element[sizeProp];\n  }\n\n  function getScrollPos(element, scrollProp) {\n    return element === window ? getWindowScroll()[scrollProp] : element[scrollProp];\n  }\n\n  function getScrollOffset(vsElement, scrollElement, isHorizontal) {\n    const vsPos = vsElement.getBoundingClientRect()[isHorizontal ? 'left' : 'top'];\n    const scrollPos = scrollElement === window ? 0 : scrollElement.getBoundingClientRect()[isHorizontal ? 'left' : 'top'];\n    const scrollValue = (scrollElement === window ? getWindowScroll() : scrollElement)[isHorizontal ? 'scrollLeft' : 'scrollTop'];\n    return vsPos - scrollPos + scrollValue;\n  }\n\n  function analyzeNgRepeatUsage(element) {\n    const options = [\n      'ng-repeat',\n      'data-ng-repeat',\n      'ng-repeat-start',\n      'data-ng-repeat-start',\n    ];\n\n    for (const opt of options) {\n      if (element.attr(opt)) {\n        return [opt, element.attr(opt), opt.indexOf('-start') >= 0];\n      }\n    }\n\n    throw new Error('angular-vs-repeat: no ng-repeat directive on a child element');\n  }\n\n  function printDeprecationWarning($element, message) {\n    console.warn(`vs-repeat deprecation: ${message}`, $element[0]);\n  }\n\n  function attrDeprecated(attrname, $element) {\n    printDeprecationWarning($element, `${attrname} attribute is deprecated. Pass the options object to vs-repeat attribute instead https://github.com/kamilkp/angular-vs-repeat#options`);\n  }\n\n  const defaultOptions = {\n    latch: false,\n    container: null,\n    scrollParent: null,\n    size: null,\n    offsetBefore: 0,\n    offsetAfter: 0,\n    scrolledToBeginning: angular.noop,\n    scrolledToEnd: angular.noop,\n    scrolledToBeginningOffset: 0,\n    scrolledToEndOffset: 0,\n    scrollMargin: 0,\n    horizontal: false,\n    autoresize: false,\n    hunked: false,\n    hunkSize: 0,\n  };\n\n  const vsRepeatModule = angular.module('vs-repeat', []).directive('vsRepeat', ['$compile', '$parse', function($compile, $parse) {\n    return {\n      restrict: 'A',\n      scope: true,\n      compile(compileElement, compileAttrs) {\n        const compileRepeatContainer = 'vsRepeatContainer' in compileAttrs ? angular.element(compileElement[0].querySelector(compileAttrs.vsRepeatContainer)) : compileElement;\n        const repeatContainerChildren = compileRepeatContainer.children();\n        const ngRepeatChild = repeatContainerChildren.eq(0);\n        let childCloneHtml = ngRepeatChild[0].outerHTML;\n        const collectionName = '$vs_collection'; // TODO: make configurable?\n\n        [\n          'vsSize',\n          'vsScrollParent',\n          'vsSizeProperty',\n          'vsHorizontal',\n          'vsOffsetBefore',\n          'vsOffsetAfter',\n          'vsScrolledToEndOffset',\n          'vsScrolledToBeginningOffset',\n          'vsExcess',\n          'vsScrollMargin',\n        ].forEach((attrname) => {\n          if (attrname in compileAttrs) {\n            attrDeprecated(attrname, compileElement);\n          }\n        });\n\n        const [originalNgRepeatAttr, ngRepeatExpression, isNgRepeatStart] = analyzeNgRepeatUsage(ngRepeatChild);\n\n        const expressionMatches = /^\\s*(\\S+)\\s+in\\s+([\\S\\s]+?)(track\\s+by\\s+\\S+)?$/.exec(ngRepeatExpression);\n        const [, lhs, rhs, rhsSuffix] = expressionMatches;\n\n        if (isNgRepeatStart) {\n          let index = 0;\n          let repeaterElement = repeatContainerChildren.eq(index);\n          while (repeaterElement.attr('ng-repeat-end') == null && repeaterElement.attr('data-ng-repeat-end') == null) {\n            index++;\n            repeaterElement = repeatContainerChildren.eq(index);\n            childCloneHtml += repeaterElement[0].outerHTML;\n          }\n        }\n\n        compileRepeatContainer.empty();\n        return {\n          pre: function($scope, $element, $attrs) {\n            function _parseSize(options) {\n              if (typeof options.size === 'number') {\n                options.getSize = () => options.size;\n              } else {\n                const parsed = $parse(String(options.size));\n                options.getSize = (item) => parsed($scope, { [lhs]: item });\n              }\n            }\n\n            $scope.vsRepeat = {\n              options: {\n                ...defaultOptions,\n                ...($scope.$eval($attrs.vsRepeat) ?? {}),\n              },\n            };\n\n            const { options } = $scope.vsRepeat;\n            _parseSize(options);\n\n            const repeatContainer = angular.isDefined($attrs.vsRepeatContainer) ? angular.element($element[0].querySelector($attrs.vsRepeatContainer)) : $element;\n            const childClone = angular.element(childCloneHtml);\n            const childTagName = childClone[0].tagName.toLowerCase();\n            let originalCollection = [];\n            let originalLength;\n            const $beforeContent = angular.element('<' + childTagName + ' class=\"vs-repeat-before-content\"></' + childTagName + '>');\n            const $afterContent = angular.element('<' + childTagName + ' class=\"vs-repeat-after-content\"></' + childTagName + '>');\n            let autosizingRequired = options.size === null;\n\n            const $scrollParent = options.scrollParent ?\n              options.scrollParent === 'window' ? angular.element(window) :\n                closestElement.call(repeatContainer, options.scrollParent) : repeatContainer;\n            const clientSize = options.horizontal ? 'clientWidth' : 'clientHeight';\n            const offsetSize = options.horizontal ? 'offsetWidth' : 'offsetHeight';\n            const scrollSize = options.horizontal ? 'scrollWidth' : 'scrollHeight';\n            const scrollPos = options.horizontal ? 'scrollLeft' : 'scrollTop';\n\n            $scope.vsRepeat.totalSize = 0;\n\n            if ($scrollParent.length === 0) {\n              throw 'Specified scroll parent selector did not match any element';\n            }\n\n            $scope.vsRepeat.$scrollParent = $scrollParent;\n            $scope.vsRepeat.sizesCumulative = [];\n\n            if (options.debug) {\n              const $debugParent = options.scrollParent === 'window' ? angular.element(document.body) : $scrollParent;\n              const $debug = angular.element('<div class=\"vs-repeat-debug-element\"></div>');\n              $debug.css('position', options.scrollParent === 'window' ? 'fixed' : 'absolute');\n              $debugParent.append($debug);\n\n              $scope.$on('$destroy', () => {\n                $debug.remove();\n              });\n            }\n\n            let measuredSize = getClientSize($scrollParent[0], clientSize) || 50;\n\n            if (options.horizontal) {\n              $beforeContent.css('height', '100%');\n              $afterContent.css('height', '100%');\n            } else {\n              $beforeContent.css('width', '100%');\n              $afterContent.css('width', '100%');\n            }\n\n            if ($attrs.vsRepeatOptions) {\n              $scope.$watchCollection($attrs.vsRepeatOptions, (newOpts) => {\n                const mergedOptions = {\n                  ...options,\n                  ...newOpts,\n                };\n\n                if (JSON.stringify(mergedOptions) !== JSON.stringify(options)) {\n                  Object.assign(options, newOpts);\n                  _parseSize(options);\n                  reinitialize();\n                }\n              });\n            }\n\n            $scope.$watchCollection(rhs, (coll = []) => {\n              originalCollection = coll;\n              refresh();\n            });\n\n            function refresh() {\n              if (!originalCollection || originalCollection.length < 1) {\n                $scope[collectionName] = [];\n                originalLength = 0;\n                $scope.vsRepeat.sizesCumulative = [0];\n              } else {\n                originalLength = originalCollection.length;\n                if (options.size) {\n                  _mapSize();\n                } else {\n                  getFromMeasured();\n                }\n              }\n\n              reinitialize();\n            }\n\n            function _mapSize(hardSize = null) {\n              const sizes = originalCollection.map(item => hardSize ?? options.getSize(item));\n              let sum = 0;\n              $scope.vsRepeat.sizesCumulative = [0, ...sizes.map((size) => (sum += size))];\n            }\n\n            function getFromMeasured() {\n              if (autosizingRequired) {\n                $scope.$$postDigest(() => {\n                  if (repeatContainer[0].offsetHeight || repeatContainer[0].offsetWidth) { // element is visible\n                    const children = repeatContainer.children();\n                    let i = 0;\n                    let gotSomething = false;\n                    let insideStartEndSequence = false;\n\n                    while (i < children.length) {\n                      if (children[i].attributes[originalNgRepeatAttr] != null || insideStartEndSequence) {\n                        if (!gotSomething) {\n                          measuredSize = 0;\n                        }\n\n                        gotSomething = true;\n                        if (children[i][offsetSize]) {\n                          measuredSize += children[i][offsetSize];\n                        }\n\n                        if (isNgRepeatStart) {\n                          if (children[i].attributes['ng-repeat-end'] != null || children[i].attributes['data-ng-repeat-end'] != null) {\n                            break;\n                          } else {\n                            insideStartEndSequence = true;\n                          }\n                        } else {\n                          break;\n                        }\n                      }\n                      i++;\n                    }\n\n                    if (gotSomething) {\n                      _mapSize(measuredSize);\n                      reinitialize();\n                      autosizingRequired = false;\n                      if ($scope.$root && !$scope.$root.$$phase) {\n                        $scope.$digest();\n                      }\n                    }\n                  } else {\n                    const dereg = $scope.$watch(() => {\n                      if (repeatContainer[0].offsetHeight || repeatContainer[0].offsetWidth) {\n                        dereg();\n                        getFromMeasured();\n                      }\n                    });\n                  }\n                });\n              } else {\n                _mapSize(measuredSize);\n              }\n            }\n\n            function getLayoutProps(value) {\n              const layoutProp = options.horizontal ? 'width' : 'height';\n              return ['', 'min-', 'max-'].reduce((acc, prop) =>\n                (acc[`${prop}${layoutProp}`] = value, acc)\n                , {});\n            }\n\n            childClone.eq(0).attr(originalNgRepeatAttr, lhs + ' in ' + collectionName + (rhsSuffix ? ' ' + rhsSuffix : ''));\n            childClone.addClass('vs-repeat-repeated-element');\n\n            repeatContainer.append($beforeContent);\n            repeatContainer.append(childClone);\n            $compile(childClone)($scope);\n            repeatContainer.append($afterContent);\n\n            $scope.vsRepeat.startIndex = 0;\n            $scope.vsRepeat.endIndex = 0;\n\n            function scrollHandler() {\n              const pos = $scrollParent[0][scrollPos];\n              if (updateInnerCollection()) {\n                $scope.$digest();\n\n                if (options._ensureScrollIntegrity) {\n                  $scrollParent[0][scrollPos] = pos;\n                }\n              }\n            }\n\n            $scrollParent.on('scroll', scrollHandler);\n\n            function onWindowResize() {\n              if (options.autoresize) {\n                autosizingRequired = true;\n                getFromMeasured();\n                if ($scope.$root && !$scope.$root.$$phase) {\n                  $scope.$digest();\n                }\n              }\n\n              if (updateInnerCollection()) {\n                $scope.$digest();\n              }\n            }\n\n            angular.element(window).on('resize', onWindowResize);\n            $scope.$on('$destroy', () => {\n              angular.element(window).off('resize', onWindowResize);\n              $scrollParent.off('scroll', scrollHandler);\n            });\n\n            $scope.$on('vsRepeatTrigger', refresh);\n\n            $scope.$on('vsRepeatResize', () => {\n              autosizingRequired = true;\n              getFromMeasured();\n            });\n\n            let _prevStartIndex,\n              _prevEndIndex,\n              _minStartIndex,\n              _maxEndIndex;\n\n            $scope.$on('vsRenderAll', function() {\n              if (!options.latch) {\n                return;\n              }\n\n              if ($scope.vsRepeat.endIndex === originalLength) {\n                $scope.$emit('vsRenderAllDone');\n                return;\n              }\n\n              setTimeout(() => {\n                // var __endIndex = Math.min($scope.vsRepeat.endIndex + (quantum || 1), originalLength);\n                const __endIndex = originalLength;\n                _maxEndIndex = Math.max(__endIndex, _maxEndIndex);\n\n                $scope.vsRepeat.endIndex = options.latch ? _maxEndIndex : __endIndex;\n                $scope[collectionName] = originalCollection.slice($scope.vsRepeat.startIndex, $scope.vsRepeat.endIndex);\n\n                _prevEndIndex = $scope.vsRepeat.endIndex;\n\n                $beforeContent.css(getLayoutProps(0));\n                $afterContent.css(getLayoutProps(0));\n\n                $scope.$emit('vsRenderAllDone');\n                if ($scope.$root && !$scope.$root.$$phase) {\n                  $scope.$digest();\n                }\n              });\n            });\n\n            function reinitialize() {\n              _prevStartIndex = void 0;\n              _prevEndIndex = void 0;\n              _minStartIndex = originalLength;\n              _maxEndIndex = 0;\n              updateTotalSize($scope.vsRepeat.sizesCumulative[originalLength]);\n              updateInnerCollection();\n\n              $scope.$emit('vsRepeatReinitialized', $scope.vsRepeat.startIndex, $scope.vsRepeat.endIndex);\n            }\n\n            function updateTotalSize(size) {\n              $scope.vsRepeat.totalSize = options.offsetBefore + size + options.offsetAfter;\n            }\n\n            let _prevClientSize;\n            function reinitOnClientHeightChange() {\n              const ch = getClientSize($scrollParent[0], clientSize);\n              if (ch !== _prevClientSize) {\n                reinitialize();\n                if ($scope.$root && !$scope.$root.$$phase) {\n                  $scope.$digest();\n                }\n              }\n              _prevClientSize = ch;\n            }\n\n            $scope.$watch(() => {\n              if (typeof window.requestAnimationFrame === 'function') {\n                window.requestAnimationFrame(reinitOnClientHeightChange);\n              } else {\n                reinitOnClientHeightChange();\n              }\n            });\n\n            function binaryFind(array, threshold, a = 0, b = array.length - 1, d = 1) {\n              if (array[a] === threshold) {\n                return [a, a, d];\n              }\n\n              if (array[b] === threshold) {\n                return [b, b, d];\n              }\n\n              if (b - a > 1) {\n                const m = Math.floor((a + b) / 2);\n                if (array[m] > threshold) {\n                  return binaryFind(array, threshold, a, m, d + 1);\n                }\n\n                return binaryFind(array, threshold, m, b, d + 1);\n              }\n\n              return [\n                threshold > array[b] ? b : a,\n                threshold < array[a] ? a : b,\n                d,\n              ];\n            }\n\n            function updateInnerCollection() {\n              const $scrollPosition = getScrollPos($scrollParent[0], scrollPos);\n              let $clientSize = getClientSize($scrollParent[0], clientSize);\n\n              if (options.debug) {\n                $clientSize /= 2;\n              }\n\n              const scrollOffset = repeatContainer[0] === $scrollParent[0] ? 0 : getScrollOffset(\n                repeatContainer[0],\n                $scrollParent[0],\n                options.horizontal,\n              );\n\n              let __startIndex = $scope.vsRepeat.startIndex;\n              let __endIndex = $scope.vsRepeat.endIndex;\n\n              if (autosizingRequired && !options.size) {\n                __startIndex = 0;\n                __endIndex = 1;\n              } else {\n                _warnMismatch();\n\n                const relativeScroll = $scrollPosition - options.offsetBefore - scrollOffset;\n\n                ([__startIndex] = binaryFind($scope.vsRepeat.sizesCumulative, relativeScroll - options.scrollMargin));\n                __startIndex = Math.max(__startIndex, 0);\n\n                ([, __endIndex] = binaryFind($scope.vsRepeat.sizesCumulative, relativeScroll + options.scrollMargin + $clientSize, __startIndex));\n                __endIndex = Math.min(__endIndex, originalLength);\n              }\n\n              _minStartIndex = Math.min(__startIndex, _minStartIndex);\n              _maxEndIndex = Math.max(__endIndex, _maxEndIndex);\n\n              $scope.vsRepeat.startIndex = options.latch ? _minStartIndex : __startIndex;\n              $scope.vsRepeat.endIndex = options.latch ? _maxEndIndex : __endIndex;\n\n              // Move to the end of the collection if we are now past it\n              if (_maxEndIndex < $scope.vsRepeat.startIndex)\n                $scope.vsRepeat.startIndex = _maxEndIndex;\n\n              let digestRequired = false;\n              if (_prevStartIndex == null) {\n                digestRequired = true;\n              } else if (_prevEndIndex == null) {\n                digestRequired = true;\n              }\n\n              if (!digestRequired) {\n                if (options.hunked) {\n                  if (Math.abs($scope.vsRepeat.startIndex - _prevStartIndex) >= options.hunkSize ||\n                                        ($scope.vsRepeat.startIndex === 0 && _prevStartIndex !== 0)) {\n                    digestRequired = true;\n                  } else if (Math.abs($scope.vsRepeat.endIndex - _prevEndIndex) >= options.hunkSize ||\n                                        ($scope.vsRepeat.endIndex === originalLength && _prevEndIndex !== originalLength)) {\n                    digestRequired = true;\n                  }\n                } else {\n                  digestRequired = $scope.vsRepeat.startIndex !== _prevStartIndex || $scope.vsRepeat.endIndex !== _prevEndIndex;\n                }\n              }\n\n              if (digestRequired) {\n                $scope[collectionName] = originalCollection.slice($scope.vsRepeat.startIndex, $scope.vsRepeat.endIndex);\n\n                // Emit the event\n                $scope.$emit('vsRepeatInnerCollectionUpdated', $scope.vsRepeat.startIndex, $scope.vsRepeat.endIndex, _prevStartIndex, _prevEndIndex);\n\n                let triggerIndex;\n                if (options.scrolledToEnd) {\n                  triggerIndex = originalCollection.length - options.scrolledToEndOffset;\n                  if (($scope.vsRepeat.endIndex >= triggerIndex && _prevEndIndex < triggerIndex) || (originalCollection.length && $scope.vsRepeat.endIndex === originalCollection.length)) {\n                    $scope.$eval(options.scrolledToEnd);\n                  }\n                }\n                if (options.scrolledToBeginning) {\n                  triggerIndex = options.scrolledToBeginningOffset;\n                  if (($scope.vsRepeat.startIndex <= triggerIndex && _prevStartIndex > $scope.vsRepeat.startIndex)) {\n                    $scope.$eval(options.scrolledToBeginning);\n                  }\n                }\n\n                _prevStartIndex = $scope.vsRepeat.startIndex;\n                _prevEndIndex = $scope.vsRepeat.endIndex;\n\n                const o1 = $scope.vsRepeat.sizesCumulative[$scope.vsRepeat.startIndex] + options.offsetBefore;\n                const o2 = $scope.vsRepeat.sizesCumulative[$scope.vsRepeat.startIndex + $scope[collectionName].length] + options.offsetBefore;\n                const total = $scope.vsRepeat.totalSize;\n\n                $beforeContent.css(getLayoutProps(o1 + 'px'));\n                $afterContent.css(getLayoutProps((total - o2) + 'px'));\n              }\n\n              return digestRequired;\n            }\n\n            function _warnMismatch() {\n              $scope.$$postDigest(() => {\n                window.requestAnimationFrame(() => {\n                  const expectedSize = $scope.vsRepeat.sizesCumulative[originalLength];\n                  const compStyle = window.getComputedStyle(repeatContainer[0]);\n                  const paddings = options.horizontal ?\n                    ['paddingLeft', 'paddingRight']\n                    : ['paddingTop', 'paddingBottom'];\n                  const containerSize = repeatContainer[0][scrollSize] - paddings.reduce((acc, prop) => acc + Number(compStyle[prop].slice(0, -2)), 0);\n\n                  if (repeatContainer[0][scrollSize] && expectedSize !== containerSize) {\n                    console.warn('vsRepeat: size mismatch. Expected size ' + expectedSize + 'px whereas actual size is ' + containerSize + 'px. Fix vsSize on element:', $element[0]);\n                  }\n                });\n              });\n            }\n          },\n        };\n      },\n    };\n  }]);\n\n  angular.element(document.head).append(\n    `<style id=\"angular-vs-repeat-style\">\n\t  \t.vs-repeat-debug-element {\n        top: 50%;\n        left: 0;\n        right: 0;\n        height: 1px;\n        background: red;\n        z-index: 99999999;\n        box-shadow: 0 0 20px red;\n      }\n\n      .vs-repeat-debug-element + .vs-repeat-debug-element {\n        display: none;\n      }\n\n      .vs-repeat-before-content,\n      .vs-repeat-after-content {\n        border: none !important;\n        padding: 0 !important;\n      }\n    </style>`\n  );\n\n  if (typeof module !== 'undefined' && module.exports) {\n    module.exports = vsRepeatModule.name;\n  }\n})(window, window.angular);\n"]}