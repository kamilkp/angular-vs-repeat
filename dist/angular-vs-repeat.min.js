function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _sliceIterator(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var s,i=e[Symbol.iterator]();!(r=(s=i.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==i.return||i.return()}finally{if(o)throw a}}return n}function _slicedToArray(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return _sliceIterator(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}!function(e,t){var n=t.element.prototype.closest;if(!n){var r=["matches","matchesSelector","webkitMatches","webkitMatchesSelector","msMatches","msMatchesSelector","mozMatches","mozMatchesSelector"].reduce(function(e,t){var n;return null!==(n=e)&&void 0!==n?n:t in document.documentElement?t:null},null);n=function(e){for(var n,o=this[0].parentNode;o!==document.documentElement&&null!=o&&!o[r](e);)o=o.parentNode;return(null===(n=o)||void 0===n?void 0:n[r](e))?t.element(o):t.element()}}function o(){var t,n,r,o;return"pageYOffset"in e?{scrollTop:e.pageYOffset,scrollLeft:e.pageXOffset}:{scrollTop:null!==(t=null!==(n=document.documentElement.scrollTop)&&void 0!==n?n:document.body.scrollTop)&&void 0!==t?t:0,scrollLeft:null!==(r=null!==(o=document.documentElement.scrollLeft)&&void 0!==o?o:document.body.scrollLeft)&&void 0!==r?r:0}}function a(t,n){return t===e?"clientWidth"===n?e.innerWidth:e.innerHeight:t[n]}function s(e,t){!function(e,t){console.warn("vs-repeat deprecation: ".concat(t),e[0])}(t,"".concat(e," attribute is deprecated. Pass the options object to vs-repeat attribute instead https://github.com/kamilkp/angular-vs-repeat#options"))}var i={latch:!1,container:null,scrollParent:null,size:null,offsetBefore:0,offsetAfter:0,scrolledToBeginning:t.noop,scrolledToEnd:t.noop,scrolledToBeginningOffset:0,scrolledToEndOffset:0,scrollMargin:0,horizontal:!1,autoresize:!1,hunked:!1,hunkSize:0},l=t.module("vs-repeat",[]).directive("vsRepeat",["$compile","$parse",function(r,l){return{restrict:"A",scope:!0,compile:function(d,c){var u="vsRepeatContainer"in c?t.element(d[0].querySelector(c.vsRepeatContainer)):d,p=u.children(),v=p.eq(0),f=v[0].outerHTML,h="$vs_collection";["vsSize","vsScrollParent","vsSizeProperty","vsHorizontal","vsOffsetBefore","vsOffsetAfter","vsScrolledToEndOffset","vsScrolledToBeginningOffset","vsExcess","vsScrollMargin"].forEach(function(e){e in c&&s(e,d)});var g=_slicedToArray(function(e){for(var t=["ng-repeat","data-ng-repeat","ng-repeat-start","data-ng-repeat-start"],n=0;n<t.length;n++){var r=t[n];if(e.attr(r))return[r,e.attr(r),r.indexOf("-start")>=0]}throw new Error("angular-vs-repeat: no ng-repeat directive on a child element")}(v),3),m=g[0],R=g[1],x=g[2],z=_slicedToArray(/^\s*(\S+)\s+in\s+([\S\s]+?)(track\s+by\s+\S+)?$/.exec(R),4),y=z[1],$=z[2],b=z[3];if(x)for(var I=0,w=p.eq(I);null==w.attr("ng-repeat-end")&&null==w.attr("data-ng-repeat-end");)I++,w=p.eq(I),f+=w[0].outerHTML;return u.empty(),{pre:function(s,d,c){var u;function p(e){if("number"==typeof e.size)e.getSize=function(){return e.size};else{var t=l(String(e.size));e.getSize=function(e){return t(s,_defineProperty({},y,e))}}}s.vsRepeat={options:_extends({},i,null!==(u=s.$eval(c.vsRepeat))&&void 0!==u?u:{})};var v=s.vsRepeat.options;p(v);var g,R=t.isDefined(c.vsRepeatContainer)?t.element(d[0].querySelector(c.vsRepeatContainer)):d,z=t.element(f),I=z[0].tagName.toLowerCase(),w=[],S=t.element("<"+I+' class="vs-repeat-before-content"></'+I+">"),T=t.element("<"+I+' class="vs-repeat-after-content"></'+I+">"),A=null===v.size,C=v.scrollParent?"window"===v.scrollParent?t.element(e):n.call(R,v.scrollParent):R,O=v.horizontal?"clientWidth":"clientHeight",M=v.horizontal?"offsetWidth":"offsetHeight",_=v.horizontal?"scrollWidth":"scrollHeight",B=v.horizontal?"scrollLeft":"scrollTop";if(s.vsRepeat.totalSize=0,0===C.length)throw"Specified scroll parent selector did not match any element";if(s.vsRepeat.$scrollParent=C,s.vsRepeat.sizesCumulative=[],v.debug){var E="window"===v.scrollParent?t.element(document.body):C,P=t.element('<div class="vs-repeat-debug-element"></div>');P.css("position","window"===v.scrollParent?"fixed":"absolute"),E.append(P),s.$on("$destroy",function(){P.remove()})}var k,L,q,H,W,j=a(C[0],O)||50;function N(){!w||w.length<1?(s[h]=[],g=0,s.vsRepeat.sizesCumulative=[0]):(g=w.length,v.size?D():F()),X()}function D(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=w.map(function(t){var n;return null!==(n=e)&&void 0!==n?n:v.getSize(t)}),n=0;s.vsRepeat.sizesCumulative=[0].concat(_toConsumableArray(t.map(function(e){return n+=e})))}function F(){A?s.$$postDigest(function(){if(R[0].offsetHeight||R[0].offsetWidth){for(var e=R.children(),t=0,n=!1,r=!1;t<e.length;){if(null!=e[t].attributes[m]||r){if(n||(j=0),n=!0,e[t][M]&&(j+=e[t][M]),!x)break;if(null!=e[t].attributes["ng-repeat-end"]||null!=e[t].attributes["data-ng-repeat-end"])break;r=!0}t++}n&&(D(j),A=!1,X(),s.$root&&!s.$root.$$phase&&s.$digest())}else var o=s.$watch(function(){(R[0].offsetHeight||R[0].offsetWidth)&&(o(),F())})}):D(j)}function J(e){var t=v.horizontal?"width":"height";return["","min-","max-"].reduce(function(n,r){return n["".concat(r).concat(t)]=e,n},{})}function Y(){var e=C[0][B];Q()&&(s.$digest(),v._ensureScrollIntegrity&&(C[0][B]=e))}function U(){v.autoresize&&(A=!0,F(),s.$root&&!s.$root.$$phase&&s.$digest()),Q()&&s.$digest()}function X(){var e;k=void 0,L=void 0,q=g,H=0,e=s.vsRepeat.sizesCumulative[g],s.vsRepeat.totalSize=v.offsetBefore+e+v.offsetAfter,Q(),s.$emit("vsRepeatReinitialized",s.vsRepeat.startIndex,s.vsRepeat.endIndex)}function G(){var e=a(C[0],O);e!==W&&(X(),s.$root&&!s.$root.$$phase&&s.$digest()),W=e}function K(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length-1,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;if(e[n]===t)return[n,n,o];if(e[r]===t)return[r,r,o];if(r-n>1){var a=Math.floor((n+r)/2);return e[a]>t?K(e,t,n,a,o+1):K(e,t,a,r,o+1)}return[t>e[r]?r:n,t<e[n]?n:r,o]}function Q(){var t,n,r=(t=C[0],n=B,t===e?o()[n]:t[n]),i=a(C[0],O);v.debug&&(i/=2);var l,c,u,p=R[0]===C[0]?0:(l=R[0],c=C[0],u=v.horizontal,l.getBoundingClientRect()[u?"left":"top"]-(c===e?0:c.getBoundingClientRect()[u?"left":"top"])+(c===e?o():c)[u?"scrollLeft":"scrollTop"]),f=s.vsRepeat.startIndex,m=s.vsRepeat.endIndex;if(A&&!v.size)f=0,m=1;else{s.$$postDigest(function(){e.requestAnimationFrame(function(){var t=s.vsRepeat.sizesCumulative[g],n=e.getComputedStyle(R[0]),r=v.horizontal?["paddingLeft","paddingRight"]:["paddingTop","paddingBottom"],o=R[0][_]-r.reduce(function(e,t){return e+Number(n[t].slice(0,-2))},0);R[0][_]&&t!==o&&console.warn("vsRepeat: size mismatch. Expected size "+t+"px whereas actual size is "+o+"px. Fix vsSize on element:",d[0])})});var x=r-v.offsetBefore-p;f=_slicedToArray(K(s.vsRepeat.sizesCumulative,x-v.scrollMargin),1)[0],f=Math.max(f,0),m=_slicedToArray(K(s.vsRepeat.sizesCumulative,x+v.scrollMargin+i,f),2)[1],m=Math.min(m,g)}q=Math.min(f,q),H=Math.max(m,H),s.vsRepeat.startIndex=v.latch?q:f,s.vsRepeat.endIndex=v.latch?H:m,H<s.vsRepeat.startIndex&&(s.vsRepeat.startIndex=H);var z=!1;if(null==k?z=!0:null==L&&(z=!0),z||(v.hunked?Math.abs(s.vsRepeat.startIndex-k)>=v.hunkSize||0===s.vsRepeat.startIndex&&0!==k?z=!0:(Math.abs(s.vsRepeat.endIndex-L)>=v.hunkSize||s.vsRepeat.endIndex===g&&L!==g)&&(z=!0):z=s.vsRepeat.startIndex!==k||s.vsRepeat.endIndex!==L),z){var y;s[h]=w.slice(s.vsRepeat.startIndex,s.vsRepeat.endIndex),s.$emit("vsRepeatInnerCollectionUpdated",s.vsRepeat.startIndex,s.vsRepeat.endIndex,k,L),v.scrolledToEnd&&(y=w.length-v.scrolledToEndOffset,(s.vsRepeat.endIndex>=y&&L<y||w.length&&s.vsRepeat.endIndex===w.length)&&s.$eval(v.scrolledToEnd)),v.scrolledToBeginning&&(y=v.scrolledToBeginningOffset,s.vsRepeat.startIndex<=y&&k>s.vsRepeat.startIndex&&s.$eval(v.scrolledToBeginning)),k=s.vsRepeat.startIndex,L=s.vsRepeat.endIndex;var $=s.vsRepeat.sizesCumulative[s.vsRepeat.startIndex]+v.offsetBefore,b=s.vsRepeat.sizesCumulative[s.vsRepeat.startIndex+s[h].length]+v.offsetBefore,I=s.vsRepeat.totalSize;S.css(J($+"px")),T.css(J(I-b+"px"))}return z}v.horizontal?(S.css("height","100%"),T.css("height","100%")):(S.css("width","100%"),T.css("width","100%")),c.vsRepeatOptions&&s.$watchCollection(c.vsRepeatOptions,function(e){var t=_extends({},v,e);JSON.stringify(t)!==JSON.stringify(v)&&(Object.assign(v,e),p(v),X())}),s.$watchCollection($,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];w=e,N()}),z.eq(0).attr(m,y+" in "+h+(b?" "+b:"")),z.addClass("vs-repeat-repeated-element"),R.append(S),R.append(z),r(z)(s),R.append(T),s.vsRepeat.startIndex=0,s.vsRepeat.endIndex=0,C.on("scroll",Y),t.element(e).on("resize",U),s.$on("$destroy",function(){t.element(e).off("resize",U),C.off("scroll",Y)}),s.$on("vsRepeatTrigger",N),s.$on("vsRepeatResize",function(){A=!0,F()}),s.$on("vsRenderAll",function(){v.latch&&(s.vsRepeat.endIndex!==g?setTimeout(function(){var e=g;H=Math.max(e,H),s.vsRepeat.endIndex=v.latch?H:e,s[h]=w.slice(s.vsRepeat.startIndex,s.vsRepeat.endIndex),L=s.vsRepeat.endIndex,S.css(J(0)),T.css(J(0)),s.$emit("vsRenderAllDone"),s.$root&&!s.$root.$$phase&&s.$digest()}):s.$emit("vsRenderAllDone"))}),s.$watch(function(){"function"==typeof e.requestAnimationFrame?e.requestAnimationFrame(G):G()})}}}}}]);t.element(document.head).append('<style id="angular-vs-repeat-style">\n\t  \t.vs-repeat-debug-element {\n        top: 50%;\n        left: 0;\n        right: 0;\n        height: 1px;\n        background: red;\n        z-index: 99999999;\n        box-shadow: 0 0 20px red;\n      }\n\n      .vs-repeat-debug-element + .vs-repeat-debug-element {\n        display: none;\n      }\n\n      .vs-repeat-before-content,\n      .vs-repeat-after-content {\n        border: none !important;\n        padding: 0 !important;\n      }\n    </style>'),"undefined"!=typeof module&&module.exports&&(module.exports=l.name)}(window,window.angular);